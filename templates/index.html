<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FFXIV Battle Tracker</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <header>
        <h1>FFXIV Battle Tracker</h1>
        <div id="session-info">
            <select id="fight-selector">
                <option value="">Loading...</option>
            </select>
        </div>
        <div id="header-actions">
            <button id="refresh-btn" class="header-btn" title="Refresh data (Ctrl+R)">Refresh</button>
        </div>
    </header>

    <main>
        <aside id="sidebar">
            <section id="summary-section">
                <h2>Session Summary</h2>
                <div class="stats-grid stats-grid-4">
                    <div class="stat-item">
                        <span class="stat-value" id="total-fights">0</span>
                        <span class="stat-label">Fights</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="total-attempts">0</span>
                        <span class="stat-label">Attempts</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="total-wipes">0</span>
                        <span class="stat-label">Wipes</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="total-victories">0</span>
                        <span class="stat-label">Victories</span>
                    </div>
                </div>
                <div id="extended-stats">
                    <div class="stat-row">
                        <span class="stat-name">Total Damage Taken</span>
                        <span class="stat-value-inline" id="total-damage">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">Total Deaths</span>
                        <span class="stat-value-inline" id="total-deaths">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">Avg Attempt Duration</span>
                        <span class="stat-value-inline" id="avg-duration">0s</span>
                    </div>
                </div>
            </section>

            <section id="fights-section">
                <h2>Fights</h2>
                <div id="fights-list"></div>
            </section>

            <section id="deaths-summary-section">
                <h2>Deaths by Player</h2>
                <div id="deaths-summary-list"></div>
            </section>
        </aside>

        <section id="content">
            <div id="attempt-header">
                <h2>Select an attempt</h2>
                <div id="attempt-meta"></div>
            </div>

            <div id="filters">
                <div class="filter-group search-group">
                    <label for="search-filter">Search:</label>
                    <input type="text" id="search-filter" placeholder="Filter by name... (Ctrl+F)">
                </div>
                <div class="filter-group">
                    <label for="player-filter">Player:</label>
                    <select id="player-filter">
                        <option value="">All Players</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="ability-filter">Ability:</label>
                    <select id="ability-filter">
                        <option value="">All Abilities</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="debuff-filter">Debuff:</label>
                    <select id="debuff-filter">
                        <option value="">All Debuffs</option>
                    </select>
                </div>
                <button id="clear-filters" class="filter-btn" title="Clear all filters">Clear</button>
            </div>

            <div id="tabs">
                <div class="tabs-left">
                    <button class="tab-btn active" data-tab="abilities" title="Press 1">Ability Hits</button>
                    <button class="tab-btn" data-tab="debuffs" title="Press 2">Debuffs</button>
                    <button class="tab-btn" data-tab="deaths" title="Press 3">Deaths</button>
                    <button class="tab-btn" data-tab="timeline" title="Press 4">Timeline</button>
                    <button class="tab-btn" data-tab="breakdown" title="Press 5">Ability Breakdown</button>
                    <button class="tab-btn" data-tab="debuff-breakdown" title="Press 6">Debuff Breakdown</button>
                </div>
                <div class="tabs-right">
                    <label class="checkbox-label">
                        <input type="checkbox" id="show-unknown-filter">
                        <span>Show Unknown</span>
                    </label>
                </div>
            </div>

            <div id="tab-content">
                <div id="abilities-tab" class="tab-panel active">
                    <table id="abilities-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="time">Time</th>
                                <th class="sortable" data-sort="ability">Ability</th>
                                <th class="sortable" data-sort="target">Target</th>
                                <th class="sortable" data-sort="damage">Damage</th>
                                <th>Crit</th>
                                <th>DH</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div id="abilities-summary" class="table-summary"></div>
                </div>

                <div id="debuffs-tab" class="tab-panel">
                    <table id="debuffs-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Debuff</th>
                                <th>Target</th>
                                <th>Duration</th>
                                <th>Stacks</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div id="debuffs-summary" class="table-summary"></div>
                </div>

                <div id="deaths-tab" class="tab-panel">
                    <table id="deaths-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Player</th>
                                <th>Killed By</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div id="timeline-tab" class="tab-panel">
                    <div id="timeline-container">
                        <div id="timeline-header">
                            <span>Fight Timeline</span>
                            <span id="timeline-duration"></span>
                        </div>
                        <div id="timeline-content"></div>
                    </div>
                </div>

                <div id="breakdown-tab" class="tab-panel">
                    <div id="breakdown-container">
                        <div id="breakdown-prompt" class="empty-state">
                            <p>Select a specific ability from the dropdown to see breakdown across attempts</p>
                        </div>
                        <div id="breakdown-content" style="display: none;">
                            <div id="breakdown-header">
                                <span>Ability: </span>
                                <span id="breakdown-ability-name"></span>
                            </div>
                            <table id="breakdown-table">
                                <thead></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="debuff-breakdown-tab" class="tab-panel">
                    <div id="debuff-breakdown-container">
                        <div id="debuff-breakdown-prompt" class="empty-state">
                            <p>Select a specific debuff from the dropdown to see breakdown across attempts</p>
                        </div>
                        <div id="debuff-breakdown-content" style="display: none;">
                            <div id="debuff-breakdown-header">
                                <span>Debuff: </span>
                                <span id="debuff-breakdown-name"></span>
                            </div>
                            <table id="debuff-breakdown-table">
                                <thead></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>FFXIV Battle Tracker - Parsing ACT logs for raid analysis</p>
        <p class="shortcuts-hint">Shortcuts: 1-6 Tabs | Ctrl+R Refresh | Ctrl+F Search | Esc Clear</p>
    </footer>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>
